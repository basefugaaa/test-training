<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Тренировка по тестам</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      max-width: 900px;
      margin: auto;
    }
    .grid {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin-bottom: 20px;
    }
    .grid button {
      width: 35px;
      height: 35px;
      border: 1px solid #ccc;
      background-color: white;
      color: black;
      font-weight: bold;
      cursor: pointer;
    }
    .grid .correct {
      background-color: #c8e6c9;
    }
    .grid .incorrect {
      background-color: #ffcdd2;
    }
    .question {
      margin-bottom: 20px;
      font-weight: bold;
    }
    .options button {
      display: block;
      margin: 5px 0;
      width: 100%;
      padding: 10px;
      font-size: 16px;
      cursor: pointer;
    }
    .result {
      margin-top: 10px;
      font-weight: bold;
    }
    .correct-answer {
      color: green;
    }
    .incorrect-answer {
      color: red;
    }
    .summary {
      margin-top: 20px;
      font-size: 18px;
    }
  </style>
  <script src="questions.js"></script>
</head>
<body>

<h1>Режим тренировки</h1>

<div class="grid" id="question-grid"></div>

<div id="quiz">
  <div class="question" id="question-text">Загрузка...</div>
  <div class="options" id="options"></div>
  <div class="result" id="result"></div>
  <button id="next-btn">Следующий вопрос</button>
</div>

<div class="summary" id="summary"></div>

<!-- Подключаем scripts в правильном порядке -->
<script src="questions.js"></script>
<script>
  // Ждём загрузки страницы
  document.addEventListener('DOMContentLoaded', function() {
    const shuffledQuestions = window.questions.sort(() => Math.random() - 0.5);
    let current = 0;
    let answers = Array(window.questions.length).fill(null);

    const grid = document.getElementById('question-grid');
    const nextBtn = document.getElementById('next-btn');

    // Создаём кнопки для вопросов
    shuffledQuestions.forEach((_, i) => {
      const btn = document.createElement('button');
      btn.textContent = i + 1;
      btn.onclick = () => {
        current = i;
        showQuestion();
      };
      grid.appendChild(btn);
    });

    function updateSummary() {
      const correct = answers.filter(a => a === 'correct').length;
      const incorrect = answers.filter(a => a === 'incorrect').length;
      document.getElementById('summary').textContent = `Правильно: ${correct} | Неправильно: ${incorrect}`;
    }

    function showQuestion() {
      const q = shuffledQuestions[current];
      document.getElementById('question-text').textContent = q.question;
      const options = document.getElementById('options');
      options.innerHTML = '';
      document.getElementById('result').textContent = '';
      
      q.options.forEach((opt, idx) => {
        const btn = document.createElement('button');
        btn.textContent = opt;
        btn.onclick = () => {
          const res = document.getElementById('result');
          const isCorrect = idx === q.correct;
          res.textContent = isCorrect ? "✅ Правильно!" : "❌ Неправильно!";
          res.className = "result " + (isCorrect ? "correct-answer" : "incorrect-answer");
          answers[current] = isCorrect ? 'correct' : 'incorrect';
          const gridButton = grid.children[current];
          gridButton.className = isCorrect ? 'correct' : 'incorrect';
          updateSummary();
        };
        options.appendChild(btn);
      });
    }

    nextBtn.addEventListener('click', () => {
      current = (current + 1) % shuffledQuestions.length;
      showQuestion();
    });

    // Показываем первый вопрос
    showQuestion();
  });
  <script src="app.js"></script>

</body>
</html>
